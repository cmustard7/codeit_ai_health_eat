
  // í•˜ìœ„ í´ë” ëª©ë¡ íŒŒì‹± í•¨ìˆ˜
  function getSubDirectories(files, pages, currentDir) {
    const subDirs = new Set();
    
    // currentDir ì •ê·œí™” (í•­ìƒ /ë¡œ ëë‚˜ë„ë¡)
    const normalizedCurrentDir = currentDir === '/' ? '/' : currentDir.endsWith('/') ? currentDir : currentDir + '/';
    
    // filesì—ì„œ í•˜ìœ„ í´ë” ì¶”ì¶œ
    files.forEach(file => {
      const filePath = file.path;
      
      // í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ ì§ì ‘ì ì¸ í•˜ìœ„ í´ë”ë§Œ ì°¾ê¸°
      if (normalizedCurrentDir === '/') {
        // ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì¸ ê²½ìš°
        if (filePath.startsWith('/') && filePath.indexOf('/', 1) > 0) {
          const firstSlashIndex = filePath.indexOf('/', 1);
          const subFolderName = filePath.substring(1, firstSlashIndex);
          const subDirPath = '/' + subFolderName + '/';
          subDirs.add(subDirPath);
        }
      } else {
        // í•˜ìœ„ ë””ë ‰í† ë¦¬ì¸ ê²½ìš°
        if (filePath.startsWith(normalizedCurrentDir)) {
          const remainingPath = filePath.substring(normalizedCurrentDir.length);
          const slashIndex = remainingPath.indexOf('/');
          if (slashIndex > 0) {
            const subFolderName = remainingPath.substring(0, slashIndex);
            const subDirPath = normalizedCurrentDir + subFolderName + '/';
            subDirs.add(subDirPath);
          }
        }
      }
    });

    // pagesì—ì„œ í•˜ìœ„ í´ë” ì¶”ì¶œ (md íŒŒì¼ ì œì™¸í•˜ê³  ëª¨ë“  í˜ì´ì§€ ì²˜ë¦¬)
    pages.forEach(page => {
      const pagePath = page.path;

      if (pagePath.startsWith('/md/')) return;
      if (pagePath.startsWith('/assets/')) return;
      
      // í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ ì§ì ‘ì ì¸ í•˜ìœ„ í´ë”ë§Œ ì°¾ê¸°
      if (normalizedCurrentDir === '/') {
        // ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì¸ ê²½ìš°
        if (pagePath.startsWith('/') && pagePath.indexOf('/', 1) > 0) {
          const firstSlashIndex = pagePath.indexOf('/', 1);
          const subFolderName = pagePath.substring(1, firstSlashIndex);
          const subDirPath = '/' + subFolderName + '/';
          subDirs.add(subDirPath);
        }
      } else {
        // í•˜ìœ„ ë””ë ‰í† ë¦¬ì¸ ê²½ìš°
        if (pagePath.startsWith(normalizedCurrentDir)) {
          const remainingPath = pagePath.substring(normalizedCurrentDir.length);
          const slashIndex = remainingPath.indexOf('/');
          if (slashIndex > 0) {
            const subFolderName = remainingPath.substring(0, slashIndex);
            const subDirPath = normalizedCurrentDir + subFolderName + '/';
            subDirs.add(subDirPath);
          }
        }
      }
    });
    
    const result = Array.from(subDirs).sort();
    
    return result;
  }

  // í´ë” ì •ë³´ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
  function getFolderInfo(folderPath) {
    const folderName = folderPath.split("/").filter(s => s).pop() || "root";
    
    // í´ë”ëª…ì— ë”°ë¥¸ ì•„ì´ì½˜ê³¼ ì„¤ëª…
    const folderMappings = {
      'md': { icon: 'ğŸ“', desc: 'Markdown ë¬¸ì„œ' },
      'íšŒì˜ë¡': { icon: 'ğŸ“‹', desc: 'íŒ€ íšŒì˜ë¡' },
      'assets': { icon: 'ğŸ¨', desc: 'ì •ì  ìì›' },
      'ê²½êµ¬ì•½ì œì´ë¯¸ì§€ë°ì´í„°': { icon: 'ğŸ’Š', desc: 'ì•½ë¬¼ ë°ì´í„°' },
      'AI ëª¨ë¸ í™˜ê²½ ì„¤ì¹˜ê°€ì´ë“œ': { icon: 'âš™ï¸', desc: 'ì„¤ì¹˜ ê°€ì´ë“œ' },
      'ê²½êµ¬ì•½ì œ ì´ë¯¸ì§€ ë°ì´í„°(ë°ì´í„° ì„¤ëª…ì„œ, ê²½êµ¬ì•½ì œ ë¦¬ìŠ¤íŠ¸)': { icon: 'ğŸ“Š', desc: 'ë°ì´í„° ì„¤ëª…ì„œ' },
      'ë°œí‘œìë£Œ': { icon: 'ğŸ“Š', desc: 'ë°œí‘œ ìë£Œ' },
      'í˜‘ì—…ì¼ì§€': { icon: 'ğŸ““', desc: 'í˜‘ì—… ì¼ì§€' }
    };
    
    return folderMappings[folderName] || { icon: 'ğŸ“', desc: 'í´ë”' };
  }

  // í´ë” ì•¡ì…˜ ë²„íŠ¼ ìƒì„± í•¨ìˆ˜
  function getFolderActions(folderPath) {
    const cleanPath = folderPath.replace(/\/$/, ''); // ëì˜ / ì œê±°
    return `
      <a href="${project_url}${cleanPath}/" class="file-action" title="í´ë” ì—´ê¸°">ğŸ“–</a>
      <a href="${project_git_url}docs${cleanPath}/" class="file-action" title="GitHubì—ì„œ ë³´ê¸°" target="_blank">ğŸ“‚</a>
    `;
  }

  // DOMì´ ë¡œë“œëœ í›„ íŒŒì¼ ëª©ë¡ ë Œë”ë§
  document.addEventListener('DOMContentLoaded', function() {
    // í•˜ìœ„ í´ë” ëª©ë¡ ìƒì„±
    const allFilesData = allFiles;
    const allPagesData = allPages;
    const subDirectories = getSubDirectories(allFilesData, allPagesData, curDir);
    
    // í´ë” ëª©ë¡ ë Œë”ë§
    const folderGrid = document.querySelector('.folder-grid');
    if (folderGrid) {
      if (subDirectories.length === 0) {
        folderGrid.innerHTML = `
          <div class="empty-message">
            <span class="empty-icon">ğŸ“</span>
            <h3>í•˜ìœ„ í´ë”ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p>í˜„ì¬ ìœ„ì¹˜ì—ëŠ” í•˜ìœ„ í´ë”ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          </div>
        `;
      } else {
        let folderHtml = '';
        subDirectories.forEach(folderPath => {
          const folderInfo = getFolderInfo(folderPath);
          const folderName = folderPath.split("/").filter(s => s).pop() || "root";
          const actions = getFolderActions(folderPath);
          
          folderHtml += `
            <div class="file-item folder-item">
              <div class="file-icon">${folderInfo.icon}</div>
              <div class="file-info">
                <h4 class="file-name">${folderName}</h4>
                <p class="file-type">${folderInfo.desc}</p>
                <p class="file-size">í´ë”</p>
              </div>
              <div class="file-actions">
                ${actions}
              </div>
            </div>
          `;
        });
        
        folderGrid.innerHTML = folderHtml;
      }
    }

  });
/*
<div class="folder-grid">
</div>
*/

